<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Groovy Tutorial</title>

    <meta name="description" content="Groovy Intro">
    <meta name="author" content="Miguel Cobá">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="revealjs/css/reveal.min.css">
    <link rel="stylesheet" href="revealjs/css/theme/default.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="revealjs/lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="revealjs/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="revealjs/lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section>
          <h1>Groovy</h1>
          <h3>Introduction</h3>
        </section>

        <section>
          <h2>Groovy</h2>
          <ul>
            <li class="fragment">dynamic language for the Java Virtual Machine</li>
            <li class="fragment">based upon Java but with additional power features</li>
            <li class="fragment">inspired by Python, Ruby and Smalltalk</li>
            <li class="fragment">has modern programming features</li>
            <li class="fragment">supports Domain-Specific Languages</li>
            <li class="fragment">integrates with all existing Java classes and libraries</li>
            <li class="fragment">compiles straight to Java bytecodes</li>
          </ul>
  
          <aside class="notes">
            Groovy Features
          </aside>
        </section>

        <section>
          <h2>Groovy 1.8</h2>
          <p>Groovy 1.8 requires JDK 1.7</p>
        </section> 
  
        <section>
          <h2>Java setup</h2>
          <ol>
            <li class="fragment">http://www.oracle.com/technetwork/java/javase/downloads/index.html</li>
            <li class="fragment">Java SE Development Kit 7u21</li>
            <li class="fragment">Create JAVA_HOME environment variable</li>
            <li class="fragment">(Windows) Add %JAVA_HOME%\bin to PATH</li>
            <li class="fragment">(GNU/Linux) Add $JAVA_HOME\bin to PATH</li>
          </ol>
        </section> 

        <section>
          <h2>Groovy setup</h2>
          <ol>
            <li class="fragment">http://groovy.codehaus.org/Download</li>
            <li class="fragment">Groovy 1.8.9</li>
            <li class="fragment">Unzip to C:\groovy-1.8.9</li>
            <li class="fragment">Create GROOVY_HOME environment variable</li>
            <li class="fragment">(Windows) Add %GROOVY_HOME%\bin to PATH</li>
            <li class="fragment">(GNU/Linux) Add $GROOVY_HOME\bin to PATH</li>
          </ol>
        </section> 

        <section>
          <h2>Groovy Programs</h2>
          <ul>
            <li class="fragment">(Shell) groovysh</li>
            <li class="fragment">(GUI) groovyConsole</li>
            <li class="fragment">(Interpreter) groovy script.groovy</li>
          </ul>
        </section>

        <section>
          <h2>External libraries</h2>
          <ul>
            <li class="fragment">Put them in %GROOVY_HOME%\lib</li>
          </ul>
        </section>

        <section>
          <h2>First Groovy program</h2>
          <pre><code data-trim>
$ groovy -e "println 'Hello, world!'"
Hello, world!
          </code></pre>
        </section>

        <section>
          <h1>Groovy Language</h1>
        </section>
 
        <section>
          <h2>Comments</h2>
          <pre><code data-trim>
// until end of line
/* between delimiters */
/* with several
lines */
          </code></pre>
        </section>

        <section>
          <h2>Strings</h2>
          <pre><code data-trim>
'Single quotes'

'''Triple
single
quotes'''

"Double quotes"

"""Triple
double
quotes"""
          </code></pre>
        </section>

        <section>
          <h2>Printing</h2>
          <pre><code data-trim>
println "hello world!"  // hello world!
print 'hello world!\n'  // hello world!
println("hello world!") // hello world!
println("hello" + " " + "world" + "!") // hello world!
def a = 5
println "a number: ${a}, and a sum: ${1 + 3}" // a number: 5, and a sum: 4
          </code></pre>
        </section>

        <section>
          <h2>Assignment</h2>
          <pre><code data-trim>
def a = 5
def b = 6.7
def c = 7, d = 8
int e = 9
String str = "10"
def str2 = "11"
          </code></pre>
        </section>

        <section>
          <h2>Multiple assignment 1</h2>
          <pre><code data-trim>
def (x,y) = [1, 2]
println x   // 1
println y   // 2
def someFunction() {
  [ 1, 3, 5 ]
}
def (a, b, c) = someFunction()
println "${a} ${b} ${c}"  // 1, 3, 5
          </code></pre>
        </section>

        <section>
          <h2>Multiple assignment 2</h2>
          <pre><code data-trim>
def firstName, lastName

(firstName, lastName) = "Miguel Cobá".tokenize()
println firstName   // Miguel
println lastName    // Cobá

def (a,b,c) = [1,2]
println "${a} ${b} ${c}" // 1 2 null
          </code></pre>
        </section>

        <section>
          <h2>Parenthesis optional</h2>
          <pre><code data-trim>
println("Hello World!") // Hello World!
println "Hello World!"  // Hello World!
          </code></pre>
        </section>

        <section>
          <h2>Safe navigation</h2>
          <pre><code data-trim>
def str = null
println str?.size() // null
str = "abc"
println str?.size() // 3
          </code></pre>
        </section>

        <section>
          <h2>if-then-else</h2>
          <pre><code data-trim>
def a = 3
if (a > 2) {
  println "was true"
} else {
  println "was false"
}
          </code></pre>
        </section>

        <section>
          <h2>Loops</h2>
          <pre><code data-trim>					
def i = 10
while( i > 0 ) {
  println i--  // post-decrement
}

10.times { println "hello" }
          </code></pre>
        </section>

        <section>
          <h2>Reflection</h2>
          <pre><code data-trim>
def a = "string"       
println a.class       // class java.lang.String
println String.name   // java.lang.String
println a.class.name  // java.lang.String
println a.class.fields 
println a.class.methods
          </code></pre>
        </section>

        <section>
          <h2>Booleans</h2>
          <pre><code data-trim>
==
!=
>
>=
<
<=
          </code></pre>
        </section>

        <section>
          <h1>Numbers</h1>
        </section>

        <section>
          <h2>Integers</h2>
          <ul>
            <li class="fragment">Integer</li>
            <li class="fragment">Long</li>
            <li class="fragment">BigInteger</li>
            <li class="fragment">Short</li>
            <li class="fragment">Byte</li>
          </ul>
        </section>

        <section>
          <h2>Examples</h2>
          <pre><code data-trim>
[110, 300000000000, 1000000000000000000000].each { println it.class }
println '42'.toInteger()        // 42
println Integer.parseInt("42")  // 42
          </code></pre>
        </section>

        <section>
          <h2>Decimals</h2>
          <ul>
            <li class="fragment">Float</li>
            <li class="fragment">Double</li>
            <li class="fragment">BigDecimal</li>
          </ul>
        </section>

        <section>
          <h2>Examples</h2>
          <pre><code data-trim>
[ 1.23e24, 4.56, 7.8E9, -1e-1].each { println it.class }
1.23e24.toString()
(-5.24566e-1234).abs() // 5.24566E-1234
          </code></pre>
        </section>

        <section>
          <h2>Dates</h2>
        </section>

        <section>
          <h2>Examples</h2>
          <pre><code data-trim>
def today = new Date()
def tomorrow = today + 1
def yesterday = today - 1
println today
println tomorrow
println yesterday
println today.after(yesterday)

def c1 = new GregorianCalendar(2010, Calendar.OCTOBER, 8)
def c2 = new GregorianCalendar(2010, Calendar.OCTOBER, 22)
println c1.after(c2)  // false
          </code></pre>
        </section>

        <section>
          <h2>Collections</h2>
        </section>

        <section>
          <h2>Lists 1</h2>
          <pre><code data-trim>
def list = [1, 2, 3, 4]
println list.get(2)         // 3
println list[2]             // 3
println list instanceof java.util.List  // true

def empty = []
println empty.size()        // 0
empty.add(10)
println empty.size()        // 1
          </code></pre>
        </section>

        <section>
          <h2>Lists 2</h2>
          <pre><code data-trim>
def list = [ 1, 2 ,-4 , "hello", new Date()]
println list.size()   // 5
println list[0]       // 1
println list.first()  // 1
println list.last()   // Mon Jan 25 11:32:15 CDT 2010
list << "new value"
println list.last()   // new value

def list2 = [ 1, 2, 3 ]
list2 << [4, 5]
println list2        // [1, 2, 3, [4, 5]]
def list3 = list2.flatten()
println list3.size() // 4
println list3        // [1, 2, 3, 4, 5]
          </code></pre>
        </section>

        <section>
          <h2>Operations 1</h2>
          <pre><code data-trim>
def items = ['one','two','three','four','five']
items.findAll { it.size() > 3 }   // [ 'three', 'four', 'five' ]
items.collect { it.capitalize() } // ['One','Two','Three','Four','Five']
items.each { println it } // prints each element
items.eachWithIndex { v, i -> 
  println "${i}: ${v}"
}
          </code></pre>
        </section>

        <section>
          <h2>Operations 2</h2>
          <p>http://groovy.codehaus.org/groovy-jdk</p>
          <ul>  
            <li>findIndexOf</li>
            <li>grep</li>
            <li>any</li>
            <li>every</li>
            <li>min</li>
            <li>max</li>
            <li>flatten</li>
            <li>intersect</li>
            <li>sort</li>
            <li>join</li>
          </code></pre>
        </section>

        <section>
          <h2>Start operator</h2>
          <pre><code data-trim>
['one', 'two', 'three']*.size() // [3, 3, 5]
          </code></pre>
        </section>

        <section>
          <h2>Examples</h2>
          <pre><code data-trim>
def list = [1, 2, 2, 3]
println list - [2]    // [1, 3]
list.clear() 
println list          // []
list << 1
list << 2
println list.contains(2)  // true
println list.count(1)     // 1
list * 2                  // [1,2,1,2]
list.indexOf(1)           // 0
list.lastIndexOf(1)       // 2
println list.reverse()    // [2, 1, 2, 1]
list.removeAll(1)         // [2, 2]
list.unique()             // [2]
          </code></pre>
        </section>

        <section>
          <h2>Array</h2>
        </section>

        <section>
          <h2>Examples</h2>
          <pre><code data-trim>
def a = new Object[3]
println a.size()  // 3
println a.length  // 3
a[0] = 'a'
println a[0..1]   // ['a', null]
          </code></pre>
        </section>

        <section>
          <h1>Maps</h1>
        </section>

        <section>
          <h2>Maps</h2>
          <ul>
            <li class="fragment">key/value store</li>
            <li class="fragment">keys are strings by default</li>
            <li class="fragment">use () to avoid conversion to string in keys</li>
          </ul>
        </section>

        <section>
          <h2>Examples 1</h2>
          <pre><code data-trim>
def map = [ "first":1, 2:"number two", "3": 3.0]
println map["first"]          // 1
println map.first             // 1
println map."2"               // null
println map[2]                // number two
println map[3]                // null
println map["3"]              // 3.0
println map."3"               // 3.0
map.fourth = "new value"     
println map.fourth            // new value
println map.class             // null
println map.getClass()        // java.util.LinkedHashMap
          </code></pre>
        </section>

        <section>
          <h2>Examples 2</h2>
          <pre><code data-trim>
def map = [name: "Miguel",
          age: 31,
          date: new Date(),
          items: []]
println map.get("name") // Miguel
println map["name"]     // Miguel
println map.name        // Miguel
println map['items']    // []
println map instanceof java.util.Map  // true
          </code></pre>
        </section>

        <section>
          <h2>Examples 3</h2>
          <pre><code data-trim>
def map = [:]
println map.size()  // 0
map.put("foo", 5)
println map.size()  // 1
println map.foo     // 5
          </code></pre>
        </section>

        <section>
          <h2>Examples 4</h2>
          <pre><code data-trim>
def a = 5   
def map = [a:5, (a): 10]
println map["a"]      // 5
println map.a         // 5
println map[5]        // 10
println map[a]        // 10
map.foo = "new value"
println map.foo       // new value
          </code></pre>
        </section>

        <section>
          <h1>Ranges</h1>
        </section>

        <section>
          <h2>Ranges</h2>
          <ul>
            <li class="fragment">java.lang.Comparable</li>
            <li class="fragment">next()/previous()</li>
          </ul>
        </section>

        <section>
          <h2>Inclusive ranges</h2>
          <pre><code data-trim>
def range = 5..8        // inclusive list: [5, 6, 7, 8]
println range.size()    // 4
println range.get(2)    // 7
println range[2]        // 7
println range instanceof java.util.List // true
println range.contains(5)    // true
println range.contains(8)    // true
println range.from           // 5
println range.to             // 8
          </code></pre>
        </section>

        <section>
          <h2>Exclusive ranges</h2>
          <pre><code data-trim>
def range = 1..<4    // inclusive list: [1, 2, 3]
println range.size()    // 3
println range.get(2)    // 3
println range[2]        // 3
println range instanceof java.util.List    // true
println range.contains(1)    // true
println range.contains(4)    // false
println range.from           // 1
println range.to             // 3
          </code></pre>
        </section>

        <section>
          <h2>Example 1</h2>
          <pre><code data-trim>
def range = 'a'..'c'
println range.size()      // 3
println range[2]          // 'c'
println range.from        // 'a'
println range.to          // 'c'
          </code></pre>
        </section>

        <section>
          <h2>Example 2</h2>
          <pre><code data-trim>
for(i in 1..10) {
  println "Hello ${i}"
}

(1..10).each { println it }

def var
switch(age) {
  case 1..<18: var = "a"
  case 18..99: var = "b"
  default: var = "c"
}
          </code></pre>
        </section>

        <section>
          <h1>Strings</h1>
        </section>

        <section>
          <h2>Delimited by " and '</h2>
          <pre><code data-trim>
println "hello 'world'!"  // hello 'world'!
println 'hello "world"!'  // hello "world"!
          </code></pre>
        </section>

        <section>
          <h2>Concatenation</h2>
          <pre><code data-trim>
def a = "world!"
println "hello" + world      // hello world!
          </code></pre>
        </section>

        <section>
          <h2>Multi-line</h2>
          <pre><code data-trim>
def multiLineText = """hello\
world\
!
"""
println multiLineText   // hello world!
          </code></pre>
        </section>

        <section>
          <h2>GString</h2>
          <ul>
            <li>$variable inside "-delimited strings</li>
            <li>${expression} inside "-delimited strings</li>
          </code></pre>
        </section>

        <section>
          <h2>Examples 1</h2>
          <pre><code data-trim>
def w = "world"
println "hello ${w}!"               // hello world!
println "hello $w!"                 // hello world!
println "today is: ${new Date()}"   // today is: Sun Oct 17 22:50:02 CDT 2010
          </code></pre>
        </section>

        <section>
          <h2>Examples 2</h2>
          <pre><code data-trim>
def str = "2010-10-22"
def dateArray = str.split("-")
def year = dateArray[0].toInteger()
year = year + 1
println (year + "-" + dateArray[1] + "-" + dateArray[2])
println ([year, dateArray[1], dateArray[2]].join("-"))
dateArray[0] = (dateArray[0].toInteger() + 1).toString()
println (dateArray.join("-"))
println "Miguel".replace("igu","anu")
          </code></pre>
        </section>

        <section>
          <h1>Regular expressions</h1>
        </section>

        <section>
          <h2>regexp</h2>
          <pre><code data-trim>
==~ matches patterns
==  matches equality
//  delimiters for regexp
          </code></pre>
        </section>

        <section>
          <h2>regexp 1</h2>
          <pre><code data-trim>
println "miguel" ==~ /miguel/
println "miguel" ==~ /mi...l/
println "miguel" ==~ /migu./
println "pattern" ==~ /patterns?/
println "patterns" ==~ /patterns?/
println "miguel" ==~ /m(igu|anu)el/
println "manuel" ==~ /m(igu|anu)el/
println "mel" ==~ /m(igu|anu)?el/
          </code></pre>
        </section>

        <section>
          <h2>regexp 2</h2>
          <pre><code data-trim>
a?    0 or 1       

empty string or 'a'
          </code></pre>
        </section>

        <section>
          <h2>regexp 3</h2>
          <pre><code data-trim>
a*    0 or more    

empty string, 'a', 'aa', 'aaa', 'aaaa', etc
          </code></pre>
        </section>

        <section>
          <h2>regexp 4</h2>
          <pre><code data-trim>
a+    1 or more    

'a', 'aa', 'aaa', etc
          </code></pre>
        </section>

        <section>
          <h2>regexp 5</h2>
          <pre><code data-trim>
a|b   a or b       

'a' or 'b' but not both


          </code></pre>
        </section>

        <section>
          <h2>regexp 6</h2>
          <pre><code data-trim>
.     any single char 

'a', 'x', '1', '+', etc
          </code></pre>
        </section>

        <section>
          <h2>regexp 7</h2>
          <pre><code data-trim>
[abcde]   any of a,b,c,d or e          

'a','b','c','d','e'
          </code></pre>
        </section>

        <section>
          <h2>regexp 8</h2>
          <pre><code data-trim>
[1-3]    range, matches any of the char in the range   

'1', '2','3'
          </code></pre>
        </section>

        <section>
          <h2>regexp 9</h2>
          <pre><code data-trim>
[^123]   any except 1, 2 or 3            

'4', 'r', '+'
          </code></pre>
        </section>

        <section>
          <h2>regexp 10</h2>
          <pre><code data-trim>
(abc)    group an expression            

'abc'
          </code></pre>
        </section>

        <section>
          <h2>regexp 11</h2>
          <pre><code data-trim>
^a       a at the beginning of line     

'a'
          </code></pre>
        </section>

        <section>
          <h2>regexp 12</h2>
          <pre><code data-trim>
a$       a at the end of line           

'a'
          </code></pre>
        </section>

        <section>
          <h2>matcher =~</h2>
          <pre><code data-trim>
def csv = "Coba, Miguel, 31, Groovy, Grails"
def regexp = 
/([a-zA-Z]+), ([a-zA-Z]+), ([0-9]+), ([a-zA-Z]+), ([a-zA-Z]+)/
def matcher = (csv =~ regexp)
if (matcher.matches()) {
  println(matcher.count)    // 1
  println(matcher[0])       
    // [Coba, Miguel, 31, Groovy, Grails]
  println(matcher[0][1])    // Cobá
  println(matcher[0][2])    // Miguel
  println(matcher[0][3])    // 31
  println(matcher[0][4])    // Groovy
  println(matcher[0][5])    // Grails
}
          </code></pre>
        </section>

        <section>
          <h2>replacement</h2>
          <pre><code data-trim>
def str = "A string is always a string"
def matcher = (str =~ /string/)
str = matcher.replaceAll("number")
println (str)
          </code></pre>
        </section>

        <section>
          <h1>Classes</h1>
        </section>

        <section>
          <h2>Examples</h2>
          <pre><code data-trim>
class Counter {
  def num = 0
  def incr() { num++ }
  def decr() { num-- }
}
def c = new Counter()
c.incr()
println c.num             // 1
1000.times { c.decr() }
println c.num             // -999
          </code></pre>
        </section>

        <section>
          <h1>Closures</h1>
        </section>

        <section>
          <h2>Closures</h2>
          <p>Anonymous block of code that may</p>
          <ul>
            <li class="fragment">Take arguments</li>
            <li class="fragment">Return a value</li>
            <li class="fragment">Reference and use variables declared in its surrounding scope</li>
          </ul>
        </section>

        <section>
          <h2>Syntax</h2>
          <p>{ [arguments ->] statements }</p>
          <ul>
            <li class="fragment">[arguments ->]: optional comma-delimited list of arguments, typed or untyped</li>
            <li class="fragment">statements: 0 or more groovy statements</li>
          </ul>
        </section>

        <section>
          <h1>Closure semantics</h1>
        </section>

        <section>
          <h2>Closures are anonymous</h2>
          <ul>
            <li class="fragment">Can be referenced using untyped variables or typed variables of type Closure</li>
            <li class="fragment">Can be passed as method arguments and as arguments to other closures</li>
          </ul>
        </section>

        <section>
          <h2>Implicit method</h2>
          <ul>
            <li class="fragment">Closures have one implicitly defined method, the one described by the arguments and body of the closure.</li>
            <li class="fragment">Implicit method name is doCall()</li>
            <li class="fragment">It is invoked by the call() method or the () syntax</li>
          </ul>
        </section>

        <section>
          <h2>Arguments 1</h2>
          <ul>
            <li class="fragment">A closure has at least one argument, available as the implicit parameter *it* IF NO EXPLICIT parameters are defined.</li>
            <li class="fragment">Explicit arguments can be typed or untyped.  When a parameter list is specified, the *it* variable is not available</li>
            <li class="fragment">They are checked at runtime, not at compile time</li>
          </ul>
        </section>

        <section>
          <h2>Arguments 2</h2>
          <ul>
            <li class="fragment">If last argument is of type Object[], any excess arguments at invocation time are placed there</li>
          </ul>
        </section>

        <section>
          <h2>Example</h2>
          <pre><code data-trim>
def msgSum = { text, Object[] args ->
  def sum = 0
  args.each { sum += it }
  text + sum
}
println msgSum("The sum is:", 1, 2)
println msgSum("The sum is:", 1, 2, 4, 5)
          </code></pre>
        </section>

        <section>
          <h2>Return value</h2>
          <p>Always return a value</p>
          <ul>
            <li class="fragment">one or more explicit return statements</li>
            <li class="fragment">value of the last executed statement if no explicit return</li>
            <li class="fragment">if the last statement has no value, null is returned</li>
          </ul>
        </section>

        <section>
          <h2>Example</h2>
          <pre><code data-trim>
def currencyConverter = { rate, value ->
  rate * value
}
def usdMxnConverter = currencyConverter.curry(13)
def eurMxnConverter = currencyConverter.curry(19)
println usdMxnConverter(5) // 5 USD -> 65 MXN
println eurMxnConverter(2) // 2 EUR -> 38 MXN
          </code></pre>
        </section>

        <section>
          <h2>Example 2</h2>
          <pre><code data-trim>
def pr = { println it }
pr("hola mundo")      // hola mundo
pr(2)                 // 2
pr(new Date())        // Sun Oct 13 11:11:11 CDT 2010
          </code></pre>
        </section>

        <section>
          <h2>Example 3</h2>
          <pre><code data-trim>
def square = { it * it }
println([1, 2, 3, 4].collect(square)) // [1, 4, 9, 16]
[1, 2, 3, 4].each(pr)                 // 1\n2\n3\n4\n
          </code></pre>
        </section>

        <section>
          <h2>Example 4</h2>
          <pre><code data-trim>
def aValue = 3
def cl = { aValue * it }
println cl(4)                 // 12
println ([1, 2].collect(cl))  // [3, 6]
          </code></pre>
        </section>

        <section>
          <h2>Example 5</h2>
          <pre><code data-trim>
def cl = { param -> param + 4 }
cl(6)     // 10
          </code></pre>
        </section>

        <section>
          <h2>Example 6</h2>
          <pre><code data-trim>
def cl = { p1, p2 -> p1 * p2 }
println cl(3,4)         // 12
println cl("hola", 3)   // holaholahola 
          </code></pre>
        </section>

        <section>
          <h2>Example 7</h2>
          <pre><code data-trim>
def l = [ 1, 2, 3, 4 ]
def sum = 0
l.each {
  sum += it
}
println "sum: ${sum}"
          </code></pre>
        </section>

        <section>
          <h2>Example 8</h2>
          <pre><code data-trim>
def myFile = new File("file.txt") // file.txt is in current directory
printFileLine = { println "File line: " + it }
myFile.eachLine( printFileLine )
          </code></pre>
        </section>

        <section>
          <h1>Groovy JDK</h1>
        </section>

        <section>
          <h2>Groovy JDK</h2>
          <p><a href="http://groovy.codehaus.org/groovy-jdk/">http://groovy.codehaus.org/groovy-jdk/</a></p>
        </section>

        <section>
          <h1>SQL</h1>
        </section>

        <section>
          <h2>Simple query</h2>
          <pre><code data-trim>
import groovy.sql.Sql
def sql = Sql.newInstance(
        "jdbc:mysql://172.16.1.97/groovy",  // JDBC URL
        "groovy","groovy",                  // user, password
        "com.mysql.jdbc.Driver")            // JDBC Driver
sql.eachRow("select * from table", 
     { println "${it.id} ${it.aCol}" })
          </code></pre>
        </section>

        <section>
          <h1>Groovy technical details</h1>
        </section>

        <section>
          <h2>Default imports</h2>
          <ul>
            <li>java.io.*</li>
            <li>java.lang.*</li>
            <li>java.math.BigDecimal</li>
            <li>java.math.BigInteger</li>
            <li>java.net.*</li>
            <li>java.util.*</li>
            <li>groovy.lang.*</li>
            <li>groovy.util.*</li>
          </ul>
        </section>

        <section>
          <h2>Assignment and equality</h2>
          <pre><code data-trim>
== equality operator
= assignment operator
is()
          </code></pre>
        </section>

        <section>
          <h2>Reserved words</h2>
          <pre><code data-trim>
in
          </code></pre>
        </section>

        <section>
          <h2>Arrays</h2>
          <pre><code data-trim>
def int[] a = [1,2,3]
          </code></pre>
        </section>

        <section>
          <h2>Optional elements</h2>
          <pre><code data-trim>
semicolon (;)
return
          </code></pre>
        </section>

        <section>
          <h2>Differences with Java</h2>
          <p>methods and classes are public by default</p>
        </section>

        <section>
          <h2>Exercise</h2>
          <aside class="notes">
          <pre><code data-trim>
import groovy.sql.Sql

def sql = Sql.newInstance("jdbc:mysql://172.16.1.97/groovy", "groovy","groovy", "com.mysql.jdbc.Driver")
def myFile = new File("dump.txt")

sql.eachRow("select * from tabla", { row ->
    def id = row.id ==~ /[0-9]/
    def email = row.email ==~ /.*@.*\..*/
    
    if(!id) { println "Bad id: ${row.id}" }
    if(!email) { println "Bad email: ${row.email}" }
    
    if (id && email) {
        def line = row.toRowResult().values().join('|')            
        println "Inserting ${line}" 
        myFile << line           
    } else {
        println "Bad record: ${row}"
    }      
})
          </code></pre>
          </aside>
        </section>

        <section>
          <h1>Thanks!</h1>
          <p>Miguel Cobá</p>
          <p><a href="http://miguel.leugim.com.mx">http://miguel.leugim.com.mx</a></p>
          <p><a href="http://github.com/miguelcoba">miguelcoba</a></p>
          <p><a href="mailto:miguel.coba@gmail.com">miguel.coba@gmail.com</a></p>
        </section>

      </div>

    </div>

    <script src="revealjs/lib/js/head.min.js"></script>
    <script src="revealjs/js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'revealjs/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'revealjs/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'revealjs/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'revealjs/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'revealjs/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'revealjs/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>

  </body>
</html>
